const _ = require('lodash');

const DATA = [
  ".........#.#.#.........#.#.....",
  "...#......#...#.....#.....#....",
  "#.....#.....#.....#.#........#.",
  "......#..#......#.......#......",
  ".#..........#.............#...#",
  "............#..##.......##...##",
  "....#.....#..#....#............",
  ".#..#.........#....#.#....#....",
  "#.#...#...##..##.#..##..#....#.",
  ".#.......#.#...#..........#....",
  "...#...#........##...#..#.....#",
  "..................#..........#.",
  ".....#.##..............#.......",
  "........#....##..##....#.......",
  "...#.....#.##..........#...##..",
  ".......#.#....#............#...",
  "..............#......#......#..",
  "#.......#...........#........##",
  ".......#.......##......#.......",
  "................#....##...#.#.#",
  "#.......#....................#.",
  ".##.#..##..#..#.#.....#.....#..",
  "#...#............#......##....#",
  ".#....##.#......#.#......#..#..",
  "..........#........#.#.#.......",
  "...#...#..........#..#....#....",
  "..#.#...#...#...##...##......#.",
  "......#...#........#.......###.",
  "....#...............#.###...#.#",
  "..................#.....#..#.#.",
  ".#...#..#..........#........#..",
  "#..........##................##",
  "...#.....#...#......#.#......#.",
  "......#..........#.#......#..#.",
  "..#......#.....................",
  "............#.........##.......",
  "......#.......#........#.......",
  "#.#...#...........#.......#....",
  ".#.#........#.#.#....#........#",
  "#.....##........#.#.....#.#....",
  ".#...#..........##...#.....#..#",
  ".........#....###............#.",
  "..#...#..............#.#.#.....",
  ".....#.#.#..#.#.#.###......#.#.",
  ".#.##...#.......###..#.........",
  ".....##....#.##..#.##..#.......",
  "..#...........##......#..#.....",
  "................##...#.........",
  "##.....................#..#.###",
  "...#..#....#...........#.......",
  ".#.............##.#.....#.#....",
  ".......#.#.#....##..#....#...#.",
  "...##..#..........#....#.......",
  "....##......#.........#........",
  ".##....#...........#.#.......#.",
  "...#...#.##.......#.#..........",
  "..#.........#.##...........#...",
  "....#.##........#.......#...##.",
  "...................#..#..#...##",
  "#...#......###..##.#..###......",
  "#.............#.#........#...#.",
  "...#...#..#..#..............#..",
  "#.....#..#...#...#......#.#..#.",
  "...##.............#........##.#",
  "......#.#.........#.#....#...#.",
  "........##............#...#....",
  "............#.#...#......#.....",
  "...#...........#...#...........",
  ".........#.#......#............",
  "....#.............#..#.....#..#",
  "#.....#...........#.....#.#.#.#",
  ".............#.....##......#...",
  "...................###.#......#",
  "#.##.....#...#..#..#...#....#..",
  "............#.....#....#.#.....",
  "#....#..#..........#....#..#...",
  "..........##..................#",
  "....#.......###..#......###....",
  ".......#...#.##.##..#....##....",
  "...##...............#.....#...#",
  "#...........#...#......#..#..#.",
  "..##....#.......#...#.....#....",
  ".......##..............#.##..#.",
  ".#......#..........#.......#...",
  "....##...................#.#..#",
  "......#....###................#",
  ".#........#...........#........",
  ".#.....##....#..##...........#.",
  "##..............##...#.......#.",
  "......#..........#..........##.",
  "..#.....#.#.........####....#..",
  ".............#......#......#...",
  "..#.............#...........##.",
  "#.#...#........#..........##...",
  "...#....#.....#.....#.....##...",
  "......#........................",
  "......#..#...#......#.....#....",
  "......#....##.....#....#.......",
  "#.#......#.##..#...............",
  "..........#.#.##..##..#........",
  "......#.#..#....###.#..........",
  "........................#....#.",
  "#.#.............#....#.....##.#",
  ".#.#..........#.......#..#....#",
  "..#...#......#..#..#...#.#...#.",
  "...#.##...###..................",
  "........#.#...........#...#....",
  "........#..........#....#......",
  "#....#........#.......##.....#.",
  "......###...##...#......#......",
  "............#.......#.....##..#",
  "....#..#.......##......#.......",
  "#............##................",
  "...............#..#......#...#.",
  ".#....##...#......#............",
  "#...#................#.........",
  "..#....#..#........##......#...",
  "....#....###......##.#.......#.",
  "......#.#..#.#..#....#..#......",
  "....#..........#..#..#.........",
  ".#..#.......#......#........#..",
  ".......#..#..#............#....",
  ".............#...#....#..#.....",
  "..............#.#.#.........#..",
  "#.....##.......#....#..........",
  "...#.....#......#..............",
  "...##.#..#.#........#..##....#.",
  ".......#.#.....##..#...........",
  ".....#.#....#..................",
  ".#......#.###..............##..",
  "..#....#...#..#...##...##....#.",
  "..........##..#...#..#.........",
  "..#............#........#.#...#",
  ".........................#.#.#.",
  "......#........#.#..#......##.#",
  "#.#......#..#.........#........",
  ".....#........#......#...#.#...",
  "........##....##....#.#........",
  "....#....#.#...#...##....#..#..",
  "#.............#.....#..........",
  "#............##..#............#",
  "..#.#......#........#..........",
  ".#......#......#.#.##.##.......",
  "..#.....#..........#......##...",
  "...#......#...#.##....#.....##.",
  "......#......#...........#.#...",
  "....#........#..#..#........#.#",
  "....#.........#.....#...#.#.#..",
  "....#.....###........#.........",
  ".............##........#.#.....",
  "...#............#........#.#.#.",
  "......#....#.......#.#.........",
  ".....#................#........",
  ".#....#..#.#.............#...#.",
  "#..##...#............#......#..",
  "...#..#........................",
  ".#.#...........#.......#.......",
  "#....###............##.........",
  "...##....#.#............##.....",
  ".........####......#........#..",
  ".....#.......#.#...............",
  ".......#...#.###..#....#...#..#",
  "...#.....##..#....#..#.#...###.",
  ".............#........#.#.#..#.",
  "................#..........##..",
  ".......####..##..##........##.#",
  "..#......#..#..#.#.##..........",
  "#....#........#....#...###.#.#.",
  "........##........##.....#.....",
  "...........#.#...........#....#",
  "#.............#...........#....",
  "...#.........#...#....#.....#..",
  "..##......#...#...............#",
  ".............#.........#....#..",
  "..#...........#..#........#.##.",
  ".#.#......#.............##...#.",
  ".#......#.....##.#..#..#.......",
  "....##......#..................",
  ".#.#..##............#....#....#",
  "........#...##.............#..#",
  "........#....##.....#......###.",
  ".........#....#.#..............",
  "#.....#........................",
  ".#..#....#.....#......#.###..#.",
  "..........#...#....##....#..#..",
  "...#.#.#...##..#..#......#..#.#",
  "#............#.....#....#......",
  "#.###...#.#......###..#....#..#",
  "...#.###........#......#....#..",
  "..#.##...#.........#.#.........",
  "............##.................",
  "....#..........#.#.#.#.#....#..",
  "...##.#...#.......#.......##..#",
  "....##.#........#....#...#.....",
  ".............#.#....#...#.....#",
  "...#......................##...",
  "..#...#.....#.....#........#..#",
  "..#..#.......#....#..##.....#..",
  "..#..#.#.......................",
  ".......##..#....#....#..#......",
  "....#......##....#............#",
  ".#...#..#..#.##...#.#...#......",
  ".....#......#....#.........#...",
  ".##......##.........#....#.....",
  "#...........#...##.....#......#",
  ".....#.#.......#.........#.....",
  ".........#..........#..####.##.",
  "............#..#......#.#......",
  ".#.............#........#.#....",
  "......#......#...#..#....#####.",
  ".........##.#..##...###..#....#",
  "....#.#....#.#..#.........#....",
  "..#.............#...##...##....",
  "........#..........#.##..#....#",
  ".....#...#..##........#.#..#...",
  "##..#.#.....#............#.....",
  ".............#........##...##..",
  "#......####.....##.............",
  "..##.....##....###..#.#....#...",
  "......##.##.#...#..#.#..##.....",
  "......#.................#......",
  "#.....#.#...#......#.#....#....",
  "....#.#........#..............#",
  "##........#.......##.#...##...#",
  "..#..................#.#....#..",
  "...........#..........#.#.....#",
  "........##.#.....#......#..#..#",
  ".....#....#..#.....#.........##",
  "#.#..#..#...#......#..........#",
  "#...##.....#..#.#.......#.##...",
  "..#....##...............#......",
  "#..........#.#.........#.#....#",
  "..............#......#....#....",
  ".....#...........#...#...#...#.",
  "...#......#....#....#..........",
  ".#..........#.#....##..##....#.",
  "..............#.........#.#....",
  ".......#.....#.....#...##....#.",
  "##.#.........#....#.....#.#....",
  "....#..#......#................",
  "......##.....#.......##........",
  ".....##...#........#...#...#...",
  "..#...#...#..#..#.#......#..#..",
  "....#...#.......#..............",
  "....#..#.........###........#..",
  "....#.............##..#........",
  "..........##.#.......##..##....",
  "#.##..................#.....#..",
  "#........#........#.....#......",
  ".#...#......#..................",
  "#....##.##......#...#.........#",
  "......#.##..##................#",
  "............#.........##.......",
  "..........####.#........#.....#",
  ".##...#...#....#..#............",
  ".#.##...#..#...#......#......##",
  ".....#.#....#..###......#.#.#..",
  "...#.......................##..",
  "......................#.......#",
  "..#....#.........#..#.#.....#..",
  ".#....#..#....#...#............",
  "..........#...##.....#.#..#....",
  "........#..#..#....#...#...#...",
  ".....#......#.#................",
  ".....#...........#...#.........",
  ".....#...##..#.#....#..#.....#.",
  "#.......#.............##.......",
  "................#....#.#..#....",
  ".#..##...#.#........#......#.#.",
  ".#.##..........#...............",
  "....##......#....#........#....",
  "....#..#....#.##.#.............",
  ".......#..#......##.#.....#....",
  ".......#.....#.............#...",
  ".....#....#.......#............",
  "........#.#...##..##..##.......",
  "#.........##....##...##........",
  "........#..#.#..........###.#..",
  "..........................#.#..",
  "#.....#.......#..#........#....",
  "...##.....#.......#......#.....",
  ".#.#..#...........#...........#",
  ".....##..#........#...####.....",
  ".#.#...##.#.#..#..#.#..#.......",
  "..#.##.#...#.#.#...#..#........",
  "............#..........#..#....",
  "...............#..##.#.........",
  ".............#.....#....#......",
  "...##..##......##..........#...",
  "..#.......#....#..........#...#",
  ".##................#.#.#.......",
  ".....##.....#..#.....#.........",
  "......#.#.......#......#..#....",
  ".....#.....#........#.......##.",
  "......#.......##......#...#...#",
  "....#...........###.........#..",
  "...#.....#.........##........#.",
  "..#.....#..............#.......",
  "....#.......#...#....#....#..##",
  "......#...........#...........#",
  ".##......#......#.#.....#.##...",
  "....#..##......#...#..#.#.###..",
  ".......#.#....#......#..#......",
  "..........#........#...........",
  "#.##.........#.#.#...#...#.#...",
  ".#......###.....#....#.#....#..",
  "...................##..#.......",
  "....#..#..............#.#.....#",
  "#..................#.....#.....",
  "...........##.##.......#..#.#..",
  "........#.#......#...........#.",
  "#..#.......#...#...........#.#.",
  "......##...........#...........",
  ".........#.#........#........#.",
  "#......#....#.#.....#..#.......",
  "............#..#.....##...#....",
  ".#......#..#......#.........#..",
  ".......#...#.........#.##.....#",
  "........................#..#...",
  ".###..............#.#..#.......",
  ".....#.........#.......#......#",
  "..##..##....#.....#.......#.#..",
  "...###.#..#.##............#....",
]

const DATA_DEMO = [
  "..##.......",
  "#...#...#..",
  ".#....#..#.",
  "..#.#...#.#",
  ".#...##..#.",
  "..#.##.....",
  ".#.#.#....#",
  ".#........#",
  "#.##...#...",
  "#...##....#",
  ".#..#...#.#",
]

const rowLength = DATA[0].length

// Part one
let cursor = 0
let treesCounterPartOne = 0;
for (const row of DATA) {
  if (row.charAt(cursor % rowLength) == '#') {
    treesCounterPartOne++;
  }
  cursor += 3
}

// Part two
const SLOPES = [
  [1, 1], // Right , down
  [3, 1], // --//--
  [5, 1],
  [7, 1],
  [1, 2]
]
let treesCounterPartTwo = 0
let treesPerSlopeList = []

for (const [right, down] of SLOPES) {
  cursor = 0
  let treesPerSlope = 0;

  for (const [i, row] of DATA.entries()) {
    if (down === 2 && i % 2) continue;

    if (row.charAt(cursor % rowLength) == '#') {
      treesPerSlope++
    }
    cursor += right
  }

  treesPerSlopeList.push(treesPerSlope)
}

const res = _.reduce(treesPerSlopeList, (sum, n) => sum * n)

console.log(`Trees part one: ${treesCounterPartOne}`)
console.log(`Trees part two: ${res}`)
